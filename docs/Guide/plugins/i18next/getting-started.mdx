---
title: Getting Started
sidebar_position: 0
---

An implementation of i18next's [filesystem backend] for Sapphire. It allows you to use a JSON-based `languages`
directory to add internationalization for your bot using `SapphireClient`'s `fetchLanguage` hook and a custom message
extension, adding features such as `sendTranslated` and `resolveKey`.

[filesystem backend]: https://github.com/i18next/i18next-fs-backend

## Installation

```bash npm2yarn2pnpm
npm install @sapphire/plugin-i18next @sapphire/framework discord.js
```

## Usage

This registers the methods and options necessary for message translations in the Sapphire client.

<Tabs groupId="language-choice">
<TabItem value="javascript" label="JavaScript" default>

```javascript
// Main bot file
// Be sure to register the plugin before instantiating the client.
require('@sapphire/plugin-i18next/register');
```

</TabItem>
<TabItem value="esm" label="ESM">

```javascript
// Main bot file
// Be sure to register the plugin before instantiating the client.
import '@sapphire/plugin-i18next/register';
```

</TabItem>
<TabItem value="typescript" label="TypeScript">

```typescript
// Main bot file
// Be sure to register the plugin before instantiating the client.
import '@sapphire/plugin-i18next/register';
```

</TabItem>
</Tabs>

The basic structure of a translation file is as follows:

<!--- languages/en-US/commands/ping.json --->

```json
{
  "success": "Pong!",
  "success_with_args": "Pong! Took me {{latency}}ms to reply"
}
```

The `resolveKey` function can be used anywhere to get translated text by its key. In this example, it is used in a
method to send a message.

```typescript ts2esm2cjs|{13}|{13}
import { resolveKey } from '@sapphire/plugin-i18next';
import { Command } from '@sapphire/framework';

export class PingCommand extends Command {
  public constructor(context: Command.Context, options: Command.Options) {
    super(context, {
      ...options,
      description: 'ping pong'
    });
  }

  public async messageRun(message: Message) {
    await message.channel.send(await resolveKey('commands/ping:success'));
  }
}
```

`sendLocalized` will send translated text resolved from a key to a specified channel.

```typescript ts2esm2cjs|{13}|{13}
import { sendLocalized } from '@sapphire/plugin-i18next';
import { Command } from '@sapphire/framework';

export class PingCommand extends Command {
  public constructor(context: Command.Context, options: Command.Options) {
    super(context, {
      ...options,
      description: 'ping pong'
    });
  }

  public async messageRun(message: Message) {
    await sendLocalized(message, 'commands/ping:success');
  }
}
```

`editLocalized` edits a message, replacing its content with translated text resolved from its key.

```typescript ts2esm2cjs|{13}|{13}
import { editLocalized } from '@sapphire/plugin-i18next';
import { Command } from '@sapphire/framework';

export class PingCommand extends Command {
  public constructor(context: Command.Context, options: Command.Options) {
    super(context, {
      ...options,
      description: 'ping pong'
    });
  }

  public async messageRun(message: Message) {
    await editLocalized(message, 'commands/ping:success_args', { latency: ws.ping });
  }
}
```

`replyLocalized` replies to a message, sending the text resolved from its key.

```typescript ts2esm2cjs|{13}|{13}
import { replyLocalized } from '@sapphire/plugin-i18next';
import { Command } from '@sapphire/framework';

export class PingCommand extends Command {
  public constructor(context: Command.Context, options: Command.Options) {
    super(context, {
      ...options,
      description: 'ping pong'
    });
  }

  public async messageRun(message: Message) {
    await replyLocalized(message, 'commands/ping:success_args', { latency: ws.ping });
  }
}
```

`fetchLanguage` returns the guild-specific language that the client is using.

```typescript ts2esm2cjs|{13}|{13}
import { fetchLanguage } from '@sapphire/plugin-i18next';
import { Command } from '@sapphire/framework';

export class PingCommand extends Command {
  public constructor(context: Command.Context, options: Command.Options) {
    super(context, {
      ...options,
      description: 'ping pong'
    });
  }

  public async messageRun(message: Message) {
    return message.channel.send(await fetchLanguage(message));
    // ===> en-US
  }
}
```
